##########################################################################
# This file contains MiCADO Profile Capacity type definitions.
##########################################################################

tosca_definitions_version: tosca_2_0

profile: eu.swarmchestrate:0.1

metadata:
  template_name: capacity.yaml
  template_author: University of Westminster
  template_version: 0.1

description: MiCADO Profile capacity type definitions

capability_types:
  HostCap:
    properties:
      num-cpus:
        type: integer
        required: true
        description: Number of vCPUs
      mem-size:
        type: string
        required: true
        description: Memory size in GB
      disk-size:
        type: string
        required: true
        description: Disk size in GB
      bandwidth:
        type: string
        required: true
        description: Network bandwidth in Mbps

  CapacityInstanceCap:
    properties:
      instances:
        type: integer
        required: false
        description: Number of instances

  CapacityCap:
    properties:
      num-cpus:
        type: integer
        required: false
        description: Number of vCPUs
      mem-size:
        type: string
        required: false
        description: Memory size in GB
      disk-size:
        type: string
        required: false
        description: Disk size in GB
      bandwidth:
        type: string
        required: false
        description: Network bandwidth in Mbps

  OSCap:
    properties:
      type:
        type: string
        required: true
        description: Operating system type
      version:
        type: string
        required: true
        description: Operating system version
      distribution:
        type: string
        required: true
        description: Operating system distribution

  NetworkCap:
    properties:
      type:
        type: string
        required: true
        description: Network type (e.g. 4G, 5G, Ethernet)
      ipv6_enabled:
        type: boolean
        required: true
        description: Whether IPv6 is enabled
      ipv4_enabled:
        type: boolean
        required: true
        description: Whether IPv4 is enabled
      subnet:
        type: string
        required: false
        description: Subnet CIDR

  ResourceCap:
    properties:
      provider:
        type: string
        required: true
        description: Resource provider
      capacity-provider:
        type: string
        required: true
        description: Capacity provider
      type:
        type: string
        required: true
        description: Resource type
      labels:
        type: map
        required: false
        entry_schema: string
        description: Labels associated with the resource

  PricingCap:
    properties:
      cost:
        type: float
        required: true
        description: Cost per hour in USD

  LocalityCap:
    properties:
      continent:
        type: string
        required: true
        description: Continent where the resource is located
      country:
        type: string
        required: true
        description: Country where the resource is located
      city:
        type: string
        required: true
        description: City where the resource is located

  EnergyCap:
    properties:
      consumption:
        type: float
        required: true
        description: Energy consumption in watts per hour
      powered-type:
        type: string
        required: false
        description: Type of power used (e.g., renewable, non-renewable)
      energy-type:
        type: string
        required: false
        description: Specific type of energy (e.g., solar, wind, coal)

  TrustCap:
    properties:
      level:
        type: float
        required: true
        description: Trust level
        default: 0.5


node_types:

  ## Future
  # CloudCapacity:
  #   description: >
  #     The Swarmchestrate Cloud Capacity Node
  #   derived_from: Capacity
  
  OverallCapacity:
    description: >
      The Swarmchestrate Overall Capacity Node
    capabilities:
      capacity:
        type: CapacityCap

  Capacity:
    description: >
      The Swarmchestrate Capacity Node
    capabilities:
      host:
        type: HostCap
      capacity:
        type: CapacityInstanceCap
      os:
        type: OSCap
      network:
        type: NetworkCap
      resource:
        type: ResourceCap
      pricing:
        type: PricingCap
      locality:
        type: LocalityCap
      energy:
        type: EnergyCap
      trust:
        type: TrustCap      
  
  EdgeCapacity:
    description: >
      The Swarmchestrate Edge Capacity Node
    derived_from: Capacity
    properties:
      ip:
        type: string
        required: true
        description: IP of edge node
        
      credentials:
        type: map
        required: false
        description: Map of credentials (e.g. token, basic auth)
        entry_schema: string