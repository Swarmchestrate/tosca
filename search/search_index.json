{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"TOSCA in Swarmchestrate","text":"<p>Welcome to the TOSCA documentation pages for the Swarmchestrate project. This resource contains information for application owners, capacity registrars and Swarmchestrate developers.</p>"},{"location":"#key-terms","title":"Key Terms","text":"<ul> <li> <p>SAT - a Swarmchestrate Application Template is the main application input to a Swarmchestrate Universe. Application owners author a SAT, which defines the microservices and resource requirements that make up an application.</p> </li> <li> <p>CDT - a Capacity Description Template defines the possible instance types that are made available by a given capacity, as well as any quotas that are to be enforced</p> </li> <li> <p>Sardou - the Swarmchestrate TOSCA library, named after the French author, Sardou, is the developer toolkit for working with SATs and CDTs. Sardou provides fsuch eatures as validation, translation and extraction.</p> </li> </ul>"},{"location":"#first-steps","title":"First Steps","text":"<ul> <li>If you are an application owner, visit the Author Guide.</li> <li>If you are a capacity administrator, visit the Capacity Definition.</li> <li>If you are a Swarmchestrate dev, visit the Sardou library page.</li> </ul>"},{"location":"capacity/","title":"Capacity Spec","text":""},{"location":"capacity/#sat-capacity-specification","title":"SAT Capacity Specification","text":""},{"location":"capacity/#spec","title":"Spec","text":"<p>The specification for Capacity has the following fields.</p> <p>The specification is not entirely finalised or fixed. Field names and types may change over the course of the project.</p>"},{"location":"capacity/#types","title":"Types","text":"<code>OverallCapacity</code> <p>The Swarmchestrate Overall Capacity Node</p> <code>capacity.num-cpus</code> <p>Optional-integer Number of vCPUs</p> <code>capacity.mem-size</code> <p>Optional-string Memory size in GB</p> <code>capacity.disk-size</code> <p>Optional-string Disk size in GB</p> <code>capacity.bandwidth</code> <p>Optional-string Network bandwidth in Mbps</p> <code>Capacity</code> <p>The Swarmchestrate Capacity Node</p> <code>host.num-cpus</code> <p>Required-integer Number of vCPUs</p> <code>host.mem-size</code> <p>Required-string Memory size in GB</p> <code>host.disk-size</code> <p>Required-string Disk size in GB</p> <code>host.bandwidth</code> <p>Required-string Network bandwidth in Mbps</p> <code>host.architecture</code> <p>Optional-string CPU architecture (e.g., x86_64, arm64)</p> <code>capacity.instances</code> <p>Optional-integer Number of instances</p> <code>os.type</code> <p>Required-string Operating system type</p> <code>os.version</code> <p>Required-string Operating system version</p> <code>os.distribution</code> <p>Required-string Operating system distribution</p> <code>network.type</code> <p>Required-string Network type (e.g. 4G, 5G, Ethernet)</p> <code>network.ipv6_enabled</code> <p>Required-boolean Whether IPv6 is enabled</p> <code>network.ipv4_enabled</code> <p>Required-boolean Whether IPv4 is enabled</p> <code>network.subnet</code> <p>Optional-string Subnet CIDR</p> <code>resource.provider</code> <p>Required-string Resource provider</p> <code>resource.capacity-provider</code> <p>Required-string Capacity provider</p> <code>resource.type</code> <p>Required-string Resource type</p> <code>resource.labels</code> <p>Optional-map Labels associated with the resource</p> <code>pricing.cost</code> <p>Required-float Cost per hour in USD</p> <code>locality.continent</code> <p>Required-string Continent where the resource is located</p> <code>locality.country</code> <p>Required-string Country where the resource is located</p> <code>locality.city</code> <p>Required-string City where the resource is located</p> <code>energy.consumption</code> <p>Required-float Energy consumption in watts per hour</p> <code>energy.powered-type</code> <p>Optional-string Type of power used (e.g., renewable, non-renewable)</p> <code>energy.energy-type</code> <p>Optional-string Specific type of energy (e.g., solar, wind, coal)</p> <code>trust.level</code> <p>Required-float Trust level</p> <code>EdgeCapacity</code> <p>The Swarmchestrate Edge Capacity Node</p> <code>string</code> <p>Primitive string type</p> <code>map</code> <p>Primitive map type</p> <code>list</code> <p>Primitive list type</p>"},{"location":"cdt/","title":"Authoring Capacities","text":"<p>The Capacity Description Template (CDT) defines the resources available for a specific capacity. Like the SAT, it follows TOSCA v2.0 and uses the same custom Swarmchestrate profile.</p> <p>The specification is not entirely finalised or fixed. Field names and types may change over the course of the project.</p>"},{"location":"cdt/#top-matter","title":"Top Matter","text":"<p>Start every CDT with the same structure used in a SAT: <code>tosca_definitions_version</code>, a human-friendly <code>description</code>, and optional <code>metadata</code> that records authorship and tagging Follow with your profile identifier and imports.</p> <pre><code>tosca_definitions_version: tosca_2_0\n\ndescription: AWS EC2 capacity in US East\n\nmetadata:\n  name: cap-aws-uow-us\n  author: University of Westminster\n  date: 2026-01-12\n  version: 0.1\n  tags:\n  - provider: aws\n  - region: us-east-1\n\nimports:\n- namespace: swch\n  url: https://raw.githubusercontent.com/Swarmchestrate/tosca/refs/heads/main/profiles/eu.swarmchestrate/profile.yaml\n</code></pre>"},{"location":"cdt/#define-a-base-resource-type-recommended","title":"Define a Base Resource Type (recommended)","text":"<p>Create a base node type for the capacity provider. In this example <code>EC2</code> captures the generic AWS EC2 shape and shared properties for all instance sizes.</p> <pre><code>node_types:\n  EC2:\n    description: &gt;\n      An EC2 compute node from the University of Westminster provision\n    properties:\n      region_name:\n        type: string\n        required: true\n        description: &gt;\n          AWS region defaults to us-east-1\n        default: us-east-1\n      image_id:\n        type: string\n        required: true\n        description: &gt;\n          The ID of the Amazon Machine Image (AMI) used to launch the EC2 instance.\n        default: ami-0c02fb55956c7d316\n      instance_type:\n        type: string\n        required: true\n        description: &gt;\n          The type of EC2 instance (e.g., t2.micro, m5.large) specifying compute resources.\n      key_name:\n        type: string\n        required: false\n        description: &gt;\n          The name of the SSH key pair used to access the EC2 instance.\n        default: g-key\n      security_group_ids:\n        type: list\n        required: false\n        entry_schema: string\n        description: &gt;\n          A list of security group IDs that control inbound and outbound traffic for the EC2 instance.\n        default:\n        - sg-0bb1c123456789abc\n      tags:\n        type: map\n        required: false\n        entry_schema: string\n        description: &gt;\n          Key-value pairs used to tag and categorise the EC2 instance (e.g., environment: production).\n        default:\n          managed_by: swarmchestrate\n    capabilities:\n      capacity:\n        properties:\n          instances:\n            type: integer\n            required: true\n            description: Number of instances\n      host:\n        properties:\n          num-cpus:\n            type: string\n            required: true\n            description: Number of vCPUs\n          mem-size:\n            type: string\n            required: true\n            description: Memory size in GB\n          disk-size:\n            type: string\n            required: true\n            description: Disk size in GB\n          bandwidth:\n            type: string\n            required: true\n            description: Network bandwidth in Mbps\n      os:\n        properties:\n          type:\n            type: string\n            required: true\n            description: Operating system type\n            default: linux\n          version:\n            type: string\n            required: true\n            description: Operating system version\n            default: \"22.04\"\n          distribution:\n            type: string\n            required: true\n            description: Operating system distribution\n            default: ubuntu\n      resource:\n        properties:\n          provider:\n            type: string\n            required: true\n            description: Resource provider\n            default: Amazon\n          capacity-provider:\n            type: string\n            required: true\n            description: Capacity provider\n            default: uow\n          type:\n            type: string\n            required: true\n            description: Resource type\n            default: cloud\n      pricing:\n        properties:\n          cost:\n            type: float\n            required: true\n            description: Cost per hour in USD\n      locality:\n        properties:\n          continent:\n            type: string\n            required: true\n            description: Continent where the resource is located\n            default: N.America\n          country:\n            type: string\n            required: true\n            description: Country where the resource is located\n            default: USA\n          city:\n            type: string\n            required: true\n            description: City where the resource is located\n            default: N.Virginia\n      energy:\n        properties:\n          consumption:\n            type: float\n            required: true\n            description: Energy consumption in watts per hour\n          powered-type:\n            type: string\n            required: false\n            description: Type of power used (e.g., renewable, non-renewable)\n            default: mains-powered\n          energy-type:\n            type: string\n            required: false\n            description: Specific type of energy (e.g., solar, wind, coal)\n            default: non-green\n</code></pre>"},{"location":"cdt/#derive-specific-instance-flavours","title":"Derive Specific Instance Flavours","text":"<p>Derive specific instance types from the base to encode size-specific defaults. Override only what differs: e.g. <code>instance_type</code>, host capacity, pricing, and energy metrics.</p> <pre><code>service_template:\n\n  node_templates:\n\n    EC2.t3.micro:\n      type: EC2\n      description: &gt;\n        An EC2 t3.micro compute node from the University of Westminster provision\n      properties:\n        instance_type: t3.micro\n      capabilities:\n        capacity:\n          properties:\n            instances: 100\n        host:\n          properties:\n            num-cpus: 2\n            mem-size: 1\n            disk-size: 20\n            bandwidth: 100\n        pricing:\n          properties:\n            cost: 0.0139\n        energy:\n          properties:\n            consumption: 13.0\n\n    EC2.t3.small:\n      type: EC2\n      description: &gt;\n        An EC2 t3.small compute node from the University of Westminster provision\n      properties:\n        instance_type: t3.small\n      capabilities:\n        capacity:\n          properties:\n            instances: 100\n        host:\n          properties:\n            num-cpus: 2\n            mem-size: 2\n            disk-size: 20\n            bandwidth: 100\n        pricing:\n          properties:\n            cost: 0.02\n        energy:\n          properties:\n            consumption: 15.0\n</code></pre> <p>Repeat for other sizes (e.g. <code>EC2.t3.medium</code>, <code>EC2.t3.large</code>) changing type, CPU, memory, disk, bandwidth, cost, and energy to match the  resource you provide.</p>"},{"location":"cdt/#edge","title":"Edge","text":"<p>Edge node definitions are a work-in-progress but follow the same structure. Here is a small example:</p> <pre><code>    Edge.rPi:\n      type: Edge\n      description: &gt;\n        A Raspberry Pi edge node from the University of Westminster provision\n      properties:\n        ip: 192.168.2.1\n        credentials:\n          token: asb1823n19a9asnd929d9n2\n      capabilities:\n        capacity:\n          properties:\n            instances: 1\n        host:\n          properties:\n            num-cpus: 4\n            mem-size: 16\n            disk-size: 200\n            bandwidth: 1000\n        pricing:\n          properties:\n            cost: 0.00\n        energy:\n          properties:\n            consumption: 5.0\n</code></pre>"},{"location":"microservice/","title":"Microservice Spec","text":""},{"location":"microservice/#sat-microservice-specification","title":"SAT Microservice Specification","text":""},{"location":"microservice/#spec","title":"Spec","text":"<p>The specification for Microservice has the following fields.</p> <p>The specification is not entirely finalised or fixed. Field names and types may change over the course of the project.</p> <code>replicas</code> <p>Optional-integer  Desired number of workload instances to run concurrently.</p> <code>selector</code> <p>Optional-map of string Label selector used to associate the workload with managed Pods. If omitted, the orchestrator may derive a selector from labels.</p> <code>strategy</code> <p>Optional-map of string Rollout strategy configuration for the workload (e.g. rolling update parameters).</p> <code>revision_history_limit</code> <p>Optional-integer  Number of prior ReplicaSets to retain for rollback.</p> <code>min_ready_seconds</code> <p>Optional-integer  Minimum number of seconds a new Pod should be ready before it is considered available.</p> <code>progress_deadline_seconds</code> <p>Optional-integer  Maximum time in seconds for the workload to make progress before it is considered failed.</p> <code>image</code> <p>Required-string  OCI container image reference to run for the primary container.</p> <code>image_pull_policy</code> <p>Optional-string  Image pull behaviour for the container. Common values include 'Always', 'IfNotPresent', and 'Never'.</p> <code>image_pull_secrets</code> <p>Optional-list of string List of Secret names used to authenticate to container registries.</p> <code>entrypoint</code> <p>Optional-list of string Entrypoint override for the container.</p> <code>cmd</code> <p>Optional-list of string Default arguments passed to the entrypoint.</p> <code>workdir</code> <p>Optional-string  Working directory inside the container.</p> <code>user</code> <p>Optional-string  User identity the container process should run as (name or numeric id).</p> <code>command</code> <p>Optional-list of string Command to execute in the container. If provided, this is treated as the authoritative command for the container.</p> <code>args</code> <p>Optional-list of string Arguments to pass to the container command. If provided, this is treated as the authoritative argument list for the container.</p> <code>working_dir</code> <p>Optional-string  Working directory inside the container. If set, this is treated as the authoritative working directory.</p> <code>env</code> <p>Optional-list of map Environment variables for the container. Each item should include at least 'name' and either 'value' or a value source reference.</p> <code>env_from</code> <p>Optional-list of map Bulk environment sources (e.g. ConfigMap or Secret references).</p> <code>ports</code> <p>Optional-list of PortMapping Container ports to declare (and optionally expose via a Service).</p> <code>hostname</code> <p>Optional-string  Hostname to set for the container.</p> <code>dns_policy</code> <p>Optional-string  DNS policy for the Pod (e.g. 'ClusterFirst').</p> <code>dns_config</code> <p>Optional-map of string DNS configuration customisation for the Pod (nameservers, searches, options).</p> <code>service_account</code> <p>Optional-string  ServiceAccount name the Pod should run as.</p> <code>automount_service_account_token</code> <p>Optional-boolean  Whether to automatically mount the ServiceAccount token into the Pod.</p> <code>security_context</code> <p>Optional-map of string Pod-level security context settings (e.g. fsGroup, runAsUser).</p> <code>container_security_context</code> <p>Optional-map of string Container-level security context settings (e.g. runAsNonRoot, capabilities).</p> <code>volumes</code> <p>Optional-list of map Volume declarations used by the Pod template.</p> <code>volume_mounts</code> <p>Optional-list of map Volume mount definitions for the container filesystem. Each item should include at least 'mountPath' and either a volume reference or name.</p> <code>resources</code> <p>Optional-map of string Resource requests and limits (e.g. cpu and memory) for the container.</p> <code>liveness_probe</code> <p>Optional-map of string Liveness probe definition used to detect and restart unhealthy containers.</p> <code>readiness_probe</code> <p>Optional-map of string Readiness probe definition used to determine when the workload can receive traffic.</p> <code>startup_probe</code> <p>Optional-map of string Startup probe definition used to delay other probes until the container starts.</p> <code>lifecycle</code> <p>Optional-map of string Lifecycle hooks for the container (e.g. postStart, preStop).</p> <code>termination_grace_period_seconds</code> <p>Optional-integer  Time in seconds to allow for graceful termination before force kill.</p> <code>node_selector</code> <p>Optional-map of string Node selector constraints for scheduling Pods.</p> <code>affinity</code> <p>Optional-map of string Affinity and anti-affinity rules for scheduling Pods.</p> <code>tolerations</code> <p>Optional-list of map Tolerations that allow Pods to schedule onto tainted nodes.</p> <code>topology_spread_constraints</code> <p>Optional-list of map Constraints to spread Pods across topology domains (e.g. zones, nodes).</p> <code>priority_class_name</code> <p>Optional-string  PriorityClass name to influence scheduling priority.</p> <code>pod_annotations</code> <p>Optional-map of string Annotations to apply specifically to Pods created by this workload, distinct from the resource-level annotations.</p> <code>pod_labels</code> <p>Optional-map of string Labels to apply specifically to Pods created by this workload, distinct from the resource-level labels.</p>"},{"location":"microservice/#types","title":"Types","text":"<code>PortMapping</code> <p>For specifying ports in a container.</p> <code>containerPort</code> <p>Optional-integer Informational only - port inside the container.</p> <code>port</code> <p>Required-integer The port number to expose targetPort to.</p> <code>targetPort</code> <p>Optional-integer The port number inside the container to map to.</p> <code>nodePort</code> <p>Optional-integer A port in range 30000-32767 available on all nodes.</p> <code>string</code> <p>Primitive string type</p> <code>map</code> <p>Primitive map type</p> <code>list</code> <p>Primitive list type</p>"},{"location":"monitoring/","title":"Monitoring","text":""},{"location":"monitoring/#sat-monitoring-specification","title":"SAT Monitoring Specification","text":""},{"location":"monitoring/#spec","title":"Spec","text":"<p>The specification for Monitoring has the following fields.</p> <p>The specification is not entirely finalised or fixed. Field names and types may change over the course of the project.</p>"},{"location":"monitoring/#types","title":"Types","text":"<code>RawMetric</code> <p>No description available</p> <code>name</code> <p>Required-string Name of the raw metric</p> <code>sensor</code> <p>Required-string Sensor type</p> <code>config</code> <p>Required-map Configuration for the metric e.g.   scope_contexts: k8s.cgroup.cpu   results-aggregation: SUM</p> <code>collection_frequency</code> <p>Required-string Frequency of collection e.g. \"30 sec\"</p> <code>collection_output</code> <p>Required-string Output type e.g. \"all\"</p> <code>CompositeMetric</code> <p>Composite metric definition.</p> <code>name</code> <p>Required-string Name of the composite metric</p> <code>formula</code> <p>Required-string Formula for the composite metric e.g. mean( cpu_util_instance )</p> <code>collection_frequency</code> <p>Required-string Frequency of collection e.g. \"30 sec\"</p> <code>collection_output</code> <p>Required-string Output type e.g. \"all\"</p> <code>window_type</code> <p>Required-string Type of window e.g. \"sliding\"</p> <code>window_size</code> <p>Required-string Size of the window e.g. \"5 min\"</p> <code>grouping</code> <p>Required-string Grouping type e.g. \"per_zone\", \"per_host\", \"per_region\" # possibly \"cross-swarms\"</p> <code>SLO</code> <p>Service Level Objective (SLO) data type.</p> <code>name</code> <p>Required-string Name of the SLO</p> <code>metric</code> <p>Optional-string Name of the metric to apply the SLO on</p> <code>operator</code> <p>Optional-string Operator for the SLO e.g. \"&gt;\"</p> <code>threshold</code> <p>Optional-float Threshold value for the SLO e.g. 80.0</p> <code>and_list</code> <p>Optional-list List of SLOs to AND together</p> <code>or_list</code> <p>Optional-list List of SLOs to OR together</p> <code>constraint</code> <p>Optional-string Constraint for the SLO e.g. \"cpu_util_prct &gt; 80\"</p>"},{"location":"policy/","title":"Policy Spec","text":""},{"location":"policy/#sat-policy-specification","title":"SAT Policy Specification","text":""},{"location":"policy/#spec","title":"Spec","text":"<p>The specification for Policy has the following fields.</p> <p>The specification is not entirely finalised or fixed. Field names and types may change over the course of the project.</p> <code>QoS.Energy.Budget</code> <p>Optional-  Energy policy type</p> <code>QoS.Cost.Budget</code> <p>Optional-  Cost policy type</p> <code>QoS.Performance.Bandwidth</code> <p>Optional-  Bandwidth policy type</p> <code>QoS.Performance.Latency</code> <p>Optional-  Latency policy type</p>"},{"location":"sardou/","title":"Sardou TOSCA Library","text":"<p>This page is primarily for developers building tooling around TOSCA. Sardou is the Swarmchestrate TOSCA toolkit, which validates, extracts and translate various information from a Swarmchestrate TOSCA template.</p>"},{"location":"sardou/#quickstart","title":"Quickstart","text":"<p>Install Puccini:</p> <pre><code>wget https://github.com/Swarmchestrate/tosca/releases/download/v0.2.4/go-puccini_0.22.7-SNAPSHOT-3e85b40_linux_amd64.deb\nsudo dpkg -i go-puccini_0.22.7-SNAPSHOT-3e85b40_linux_amd64.deb || sudo apt --fix-broken install -y\n</code></pre> <p>Install Sardou:</p> <pre><code>uv add sardou\n</code></pre> <p>Run the Sardou CLI to validate an SAT or CDT:</p> <pre><code>sardou templates/BookInfo.yaml\n</code></pre>"},{"location":"sardou/#setup","title":"Setup","text":""},{"location":"sardou/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.12</li> <li>Minimum GLIBC 2.34 (Ubuntu 22.04 or higher)</li> <li>Puccini: Should work with any 0.22.x version, but prefer the latest (currently unreleased) version. Build from source from Go-Puccini or use the prebuilts attached to this release in this repository</li> </ul> <p>You can install the recommended Puccini on Linux with: <pre><code>wget https://github.com/Swarmchestrate/tosca/releases/download/v0.2.4/go-puccini_0.22.7-SNAPSHOT-3e85b40_linux_amd64.deb\nsudo dpkg -i go-puccini_0.22.7-SNAPSHOT-3e85b40_linux_amd64.deb || sudo apt --fix-broken install -y\n</code></pre></p>"},{"location":"sardou/#install","title":"Install","text":"<p>Install from PyPi using uv or pip</p> uvpip <pre><code>uv add Sardou\n</code></pre> <pre><code>pip install Sardou\n</code></pre>"},{"location":"sardou/#usage","title":"Usage","text":""},{"location":"sardou/#command-line-interface","title":"Command-line Interface","text":"<p>The Sardou CLI currently only performs validation. Run it against any SAT or CDT. If processed succesfully, the template is valid.</p> <pre><code>sardou templates/BookInfo.yaml\n</code></pre>"},{"location":"sardou/#library","title":"Library","text":"<p>Import the Sardou TOSCA Library</p> <pre><code>from sardou import Sardou # note the uppercase S\n</code></pre>"},{"location":"sardou/#validation","title":"Validation","text":"<p>Create a new <code>Sardou</code> object, passing it the path to your Swarmchestrate TOSCA template. This will validate the template and complete the representation, inheriting from parent types.</p> <pre><code>&gt;&gt;&gt; tosca = Sardou(\"my_app.yaml\")\nProcessed successfully: my_app.yaml\n\n&gt;&gt;&gt; tosca\n{'description': 'stressng on Swarmchestrate', 'nodeTemplates': {'resource-1': {'metadata': {}, 'description': '', 'types': {'eu.swarmchestrate:0.1::EC2.micro.t3': {'description': 'An EC2 compute node from the University of Westminster provision\\n', 'parent': 'eu.swarmchestrate:0.1::Resource'} ...\n</code></pre> <p>The template is not resolved at this point (i.e. statisfied requirements and created relationships) - that functionality to come. If there are errors or warnings, they will be presented at this time.</p>"},{"location":"sardou/#exploring-the-template","title":"Exploring the Template","text":"<p>Get the raw, uncompleted (original YAML) with the <code>raw</code> attribute.</p> <pre><code>&gt;&gt;&gt; tosca.raw\n{'tosca_definitions_version': 'tosca_2_0', 'description': 'stressng on Swarmchestrate', 'imports': [{'namespace': 'swch' ...\n</code></pre> <p>You can traverse YAML maps using dot notation if needed (which leads to some unexpected behaviour, so this may not be a long-term feature)</p> <pre><code>&gt;&gt;&gt; tosca.nodeTemplates\n{'resource-1': {'metadata': {}, 'description': '', 'types': {'eu.swarmchestrate:0.1::EC2.micro.t3' ...\n</code></pre>"},{"location":"sardou/#capacities-detail","title":"Capacities Detail","text":"<p>NOTE This only works on CDTs.</p> <p>Grab capacity detail from a CDT using <code>get_capacities()</code></p> <pre><code>&gt;&gt;&gt; tosca.get_capacities()\nt.get_capacities()\n({'m2-medium-sztaki': {'capacity': {'instances': 4}, 'energy': {'consumption': 0.1, 'energy-type': 'non-green', 'powered-type': 'mains-powered'}, 'host': {'bandwidth': '1000', 'disk-size': '20', 'mem-size': '8 GB', 'num-cpus': 4},\n</code></pre>"},{"location":"sardou/#quality-of-service-policies","title":"Quality of Service Policies","text":"<p>Grab the QoS requirements as a Python object with <code>get_qos()</code> You could dump this to JSON or YAML.</p> <pre><code>&gt;&gt;&gt; tosca.get_qos()\n[{'energy': {'type': 'swch:QoS.Energy.Budget', 'properties': {'priority': 0.3, 'target': 10}}}...\n</code></pre>"},{"location":"sardou/#resource-requirements","title":"Resource Requirements","text":"<p>Grab the Resource requirements as a Python object with <code>get_requirements()</code> You could dump this to JSON or YAML.</p> <pre><code>&gt;&gt;&gt; tosca.get_requirements()\n{'worker-node': {'metadata': {'created_by': 'floria-tosca-lib', 'created_at': '2025-09-16T14:51:24Z', 'description': 'Generated from node worker-node', 'version': '1.0'}, 'capabilities': {'host': {'properties': {'num-cpus': {'$greater_than': 4}, 'mem-size': {'$greater_than': '8 GB'}}}, ...\n</code></pre>"},{"location":"sardou/#cluster-configuration-details","title":"Cluster Configuration Details","text":"<p>Get the cluster configuration details for the resources as a Python object with <code>get_cluster()</code> You could dump this to JSON or YAML.</p> <pre><code>&gt;&gt;&gt; tosca.get_cluster()\n{'resource-1': {'image_id': 'ami-0c02fb291006c7d929', 'instance_type': 't3.micro', 'key_name': 'mykey', 'region_name': 'us-east-1' ...\n</code></pre>"},{"location":"sardou/#kubernetes-manifests-manifestgeneratorpy","title":"Kubernetes Manifests (manifestGenerator.py)","text":"<ul> <li>Provides the function get_kubernetes_manifest(tosca_yaml: str, image_pull_secret: str = \"test\") -&gt; list.</li> <li>Purpose: Converts a TOSCA YAML template into Kubernetes manifests (Deployments + Services).</li> <li>Supported fields: image, args, env, ports, volumes, nodeSelector, replicas, imagePullSecrets.</li> <li>Automatically injects an external imagePullSecret if provided.</li> </ul> <p>Input: - A valid TOSCA YAML template as a string.  - Optional: name of an imagePullSecret to include in all generated Deployments.</p> <p>Output: - A list of dictionaries representing Kubernetes manifests ready to be serialized to YAML.</p>"},{"location":"sardou/#manifest-generation-script-run_manifest_generatorpy","title":"Manifest Generation Script (run_manifest_generator.py)","text":"<ul> <li>Takes a single TOSCA YAML file and generates Kubernetes manifests as a multi-document YAML file (output.yaml).</li> <li>Usage: update the TOSCA_FILE and OUTPUT_FILE variables in the script and run:</li> </ul> <pre><code>python3 run_manifest_generator.py\n</code></pre>"},{"location":"sat/","title":"Authoring Applications","text":"<p>The Swarmchestrate Application Template (SAT) conforms closely to the v2.0 of the TOSCA Specification and uses a custom Swarmchestrate profile being developed by the project.</p> <p>TOSCA and by association, the SAT, are specified in YAML, a superset of JSON. YAML does away with some of the noisy JSON syntax, relying on indentation instead, for a more human readable representation.</p> <p>The specification is not entirely finalised or fixed. Field names and types may change over the course of the project.</p>"},{"location":"sat/#top-matter","title":"Top Matter","text":"<p>Every SAT begins in the same way:</p> <ul> <li>Reference the TOSCA v2.0 Specification</li> <li>Optionally describe the application</li> <li>Optionally provide application metadata</li> <li>Import the custom Swarmchestrate profile as <code>swch</code></li> </ul> <p>Optional fields provide additional information for humans</p> <pre><code>tosca_definitions_version: tosca_2_0\n\ndescription: stressng on Swarmchestrate\n\nmetadata:\n  name: stressng\n  author: Jay DesLauriers\n  date: 2025-08-10\n  version: 1.0\n  tags:\n  - demo\n\nimports:\n- namespace: swch\n  url: https://raw.githubusercontent.com/Swarmchestrate/tosca/refs/heads/main/profiles/eu.swarmchestrate/profile.yaml\n</code></pre>"},{"location":"sat/#defining-the-swarm","title":"Defining the Swarm","text":"<p>The next section of the SAT defines the <code>service_template</code> and <code>node_templates</code> keys. The first entry, or node, under <code>node_templates</code> is recommended to be the required <code>swarm</code> node. </p> <p>Each node in a TOSCA template is assigned a type, and here we use the <code>Swarm</code> type from the <code>swch</code> namespace we created in the top matter. Types from the custom Swarmchestrate profile are rich in functionality, and the <code>Swarm</code> type is later used to deploy the required compute resources for the application. Simply use it as shown below, with the <code>substitute</code> directive.</p> <pre><code>service_template:\n\n  node_templates:\n\n    swarm:\n      type: swch:Swarm\n      directives:\n      - substitute\n</code></pre>"},{"location":"sat/#defining-a-microservice","title":"Defining a Microservice","text":"<p>The rest of the <code>node_templates</code> section should be populated with nodes that describe your application microservices and their resource requirements. Each node describes one microservice.</p> <p>These nodes should use the <code>Microservice</code> type from the Swarmchestrate profile at <code>swch</code>, which offers the most common configuration options for OCI containerised applications to be deployed to Kubernetes. These options are defined under the <code>properties</code> key.</p> <p>The only required property is <code>image</code>, which should define the full path to the OCI container image for the microservice. Other available properties are defined in the SAT Microservice Specification. `</p> <pre><code>    # Indented under node_templates (same level as swarm)\n    stressng:\n      type: swch:Microservice\n      properties:\n        image: lorel/docker-stress-ng\n        args: ['--cpu', '0', '--cpu-method', 'pi', '-l', '20']\n</code></pre>"},{"location":"sat/#defining-resource-requirements","title":"Defining Resource Requirements","text":"<p>Attached to each Microservice are its resource requirements. This information is generally required so that Swarmchestrate can make the most intelligent decisions about the initial deployment. </p> <p>The <code>requirements</code> key should express a requirement for <code>host</code>, which should be described by a TOSCA <code>node_filter</code>. Node filters are logical expressions that indicate a desired resource configuration. The syntax is not immediately intuitive, so a full list of examples is available in the SAT Resource Specification.</p> <p>In the below example, the microservice requires a resource that is located in London that has exactly 4 CPUs.</p> <pre><code>    # Continuation of the example above. Not a new node.\n    stressng:\n      type: swch:Microservice\n      properties:\n        image: lorel/docker-stress-ng\n        args: ['--cpu', '0', '--cpu-method', 'pi', '-l', '20']\n      requirements:\n      - host:\n          node_filter:\n            $and:\n              - $equal:\n                  - $get_property: [ SELF, TARGET, CAPABILITY, host, num-cpus ]\n                  - 4\n              - $equal:\n                  - $get_property: [ SELF, TARGET, CAPABILITY, locality, city ]\n                  - london\n</code></pre>"},{"location":"sat/#defining-qos-policies","title":"Defining QoS Policies","text":"<p>QoS policies drive reconfiguration in Swarmchestrate. QoS policies target a specific metric value and make intelligent reconfiguration decisions to ensure these targets are met. They are defined as TOSCA Policies, under the <code>policies</code> key of the <code>service_template</code> section.</p> <p>Policies specify a priority, to be used in case of competing policies (high priority policies take precedence). They also specify a tolerance - an allowable over/under for the target value. Most importantly, policies specify an exact <code>target</code> value, or <code>targets</code>, which can be <code>greater_than</code>, <code>less_than</code> or <code>in_range</code>.</p> <p>A full list of policies is available in the SAT Policy Specification.</p> <pre><code>  # Indented under service_template (same level as node_templates)\n  policies:\n  - type: swch:QoS.Performance.ResponseTime\n    properties:\n      priority: 90\n      tolerance: 0.2\n      targets:\n      - less_than: 200ms\n</code></pre>"}]}